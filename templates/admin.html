<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title>관리자화면</title>
        <style>
            body {
                margin: 0;
                background: #111;
                height: 100vh; /* 전체 화면 높이 */
                display: flex;
                flex-direction: column;
            }
            .container {
                display: flex;
                flex-direction: column;
                flex: 1;
                gap: 10px;
                padding: 10px;
            }
            .top {
                display: flex;
                flex-direction: row;
                color: white;
                border: 1px solid white;
                height: 10vh;
                padding-left: 40px;
                align-items: center;
                justify-content: space-between;
            }
            .화면전환 {
                display: flex;
                flex-direction: row;
                /* border: 1px solid white; */
                text-align: center;
                gap: 10px;
                padding: 10px;
                align-items: center;
            }

            .main {
                display: flex;
                flex: 1; /* 남은 공간 전부 차지 */
                gap: 10px;
                height: calc(100vh - 10vh - 20px);
            }

            .left {
                flex: 50; /* 비율로 설정 */
            }

            .right {
                flex: 45;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .right > div {
                display: flex;
                gap: 10px;
                flex: 1; /* 세로 공간 균등 분배 */
            }

            iframe {
                width: 100%;
                height: 100%;
                border: none;
            }

            .now_status_manipulate {
                display: inline;
            }
            .now_status {
                width: 50%;
            }
            .manipulate {
                color: white;
                border: 1px solid white;
                width: 50%;
                display: inline;
                text-align: center;
                justify-content: center; /* 가로 가운데 정렬 */
                align-items: center; /* 가로 가운데 정렬 */
            }
            .manipulate ul {
                list-style: none; /* 리스트 불릿 제거 */
                padding: 10px;

                /* border: 1px solid white; */

                align-content: center;
                height: 80%;
            }

            .manipulate li {
                /* border: 1px solid white; */
                display: flex;
                /* justify-content: center;  */
                text-align: left;
                align-items: center;
                justify-content: space-between;

                height: 50px; /* 높이 지정 (원하면 조정 가능) */
                margin: 10px;
                text-align: left;
            }
            .manipulate li div {
                /* border: 1px solid red; */
                text-align: left;
                margin-left: 25%;
                font-size: 20px;
            }
            .manipulate li button {
                /* border: 1px solid red; */
                margin-right: 25%;
            }
            .in_out_information {
                width: 50%;
            }
            .textzone {
                width: 50%;
            }
            h3 {
                padding: 0;
                margin: 0;
                position: absolute;
                padding-left: 0;
                padding-top: 0;
            }
            .그대로가져오기 {
                justify-content: left;
                width: 80vw;
                border: 1px solid white;
            }
            .realmain {
                display: flex;
                flex: 1; /* 남은 공간 전부 차지 */
                gap: 10px;
            }
            .UIadd {
                display: flex;
                flex-direction: column; /* 세로로 나누기 */
                width: 20vw;
                border: 1px solid white;
                flex: 1;
                gap: 10px; /* 위아래 간격 */
            }

            .UIadd iframe {
                flex: 1;
                width: 100%;
                border: none;
            }
            .UIadd > div {
                border: 1px solid white;
                height: 50%;
            }
        </style>
    </head>
    <body>
        <div class="container" id="container">
            <!-- 상단 긴 박스 -->
            <div class="top">
                <div>
                    <h1>Air Protector</h1>
                </div>
                <div class="화면전환">
                    <h4><a href="{{ url_for('user_page') }}">사용자화면</a></h4>
                    <h4>|</h4>
                    <h4><a href="{{ url_for('admin_page') }}">관리자화면</a></h4>
                </div>
            </div>
            <div class="realmain">
                <div class="그대로가져오기">
                    <div class="main">
                        <!-- 왼쪽 큰 박스 -->
                        <div class="left">
                            <h3>공기 분석</h3>
                            <iframe
                                src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                            ></iframe>
                        </div>

                        <!-- 오른쪽 영역 -->
                        <div class="right">
                            <div>
                                <h3>경고 알림 확인 + 자동제어 기록</h3>
                                <iframe
                                    src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                                ></iframe>
                            </div>

                            <div class="now_status_manipulate">
                                <h3>현재상태</h3>
                                <div class="now_status">
                                    <iframe
                                        src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                                    ></iframe>
                                </div>
                                <div class="manipulate">
                                    <h3>수동제어</h3>
                                    <ul>
                                        <li>
                                            <div class="window">ㅤ창문</div>
                                            <button>on/off</button>
                                        </li>
                                        <li>
                                            <div>환기 팬</div>
                                            <button>on/off</button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div>
                                <div class="in_out_information">
                                    <h3>실내외 온도/습도/바람세기</h3>
                                    <iframe
                                        src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                                    ></iframe>
                                </div>
                                <div class="textzone">
                                    <h3 id="ventTitle"></h3>
                                    <iframe id="ventIframe"></iframe>
                                    <button
                                        id="toggleBtn"
                                        style="
                                            position: absolute;
                                            bottom: 20px;
                                            right: 20vw;
                                        "
                                    >
                                        전환하기
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="UIadd">
                    <div>
                        <h3>센서상태확인</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                        ></iframe>
                    </div>
                    <div>
                        <h3>데이터 드리프트 알림</h3>
                        <iframe
                            src="http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s"
                        ></iframe>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        // 환기 여부 (true면 환기 중, false면 환기 안 함)
        let isVentilating = true; //초기상태 👉 실제 값은 센서/백엔드에서 받아오면 됨

        const title = document.getElementById('ventTitle');
        const iframe = document.getElementById('ventIframe');
        const toggleBtn = document.getElementById('toggleBtn');

        if (isVentilating) {
            // 환기할 때
            title.textContent = '환기시간예측';
            iframe.src =
                'http://localhost:3000/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s';
        } else {
            // 환기 안 할 때
            title.textContent = '가스 설명';
            iframe.src =
                'http://localhost:3001/d-solo/abcd1234/test-dashboard?orgId=1&refresh=5s';
        }

        updateIframe();

        toggleBtn.addEventListener('click', () => {
            isVentilating = !isVentilating; // 상태 토글
            updateIframe(); // 변경된 상태 반영
        });
    </script>
</html>
